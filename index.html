<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>SYSTEM FAILURE</title>

<style>
html, body {
  margin: 0;
  height: 100%;
  background: black;
  overflow: hidden;
  touch-action: none;
  user-select: none;
  font-family: system-ui, monospace;
}

#screen {
  position: fixed;
  inset: 0;
  background: #000;
  color: #ddd;
}

/* Core text */
#core {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  z-index: 5;
  filter: contrast(130%) saturate(130%);
}

/* Scanlines */
#screen::after {
  content: "";
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    to bottom,
    rgba(255,255,255,0.04),
    rgba(255,255,255,0.04) 1px,
    transparent 1px,
    transparent 3px
  );
  pointer-events: none;
  z-index: 9;
}

/* Horizontal tear */
.strip {
  position: absolute;
  width: 100%;
  height: 6px;
  background: inherit;
  filter: brightness(150%) contrast(160%);
  z-index: 7;
}

/* Vertical tear */
.vstrip {
  position: absolute;
  height: 100%;
  width: 8px;
  background: inherit;
  filter: brightness(160%);
  z-index: 7;
}

/* Pixel corruption */
#pixels {
  position: fixed;
  inset: 0;
  background: repeating-linear-gradient(
    90deg,
    rgba(255,255,255,0.03) 0px,
    rgba(255,255,255,0.03) 1px,
    transparent 1px,
    transparent 4px
  );
  mix-blend-mode: difference;
  opacity: 0;
  z-index: 8;
}

/* Color floods */
.flash { position: fixed; inset: 0; opacity: 0; z-index: 20; }
#blue { background:#0055ff; }
#red { background:#ff0000; }
#green { background:#00ff55; }

/* Warning */
#warning {
  position: fixed;
  bottom: 12%;
  width: 100%;
  text-align: center;
  color: #ff4444;
  font-size: 14px;
  opacity: 0;
  animation: blink 1.1s infinite;
  z-index: 10;
}

@keyframes blink {
  0%,50% { opacity: 0; }
  51%,100% { opacity: 1; }
}

/* Text jitter */
@keyframes jitter {
  0% { transform: translate(0,0); }
  25% { transform: translate(-2px,1px); }
  50% { transform: translate(2px,-1px); }
  75% { transform: translate(-1px,-2px); }
}
.jitter { animation: jitter 0.12s infinite; }
</style>
</head>

<body>

<div id="screen">
  <div id="core" class="jitter">
    <div>
      <h2>⚠ CRITICAL SYSTEM FAILURE</h2>
      <p>Display driver stopped responding</p>
      <p style="opacity:.6">VIDEO_TDR_FAILURE</p>
    </div>
  </div>

  <div id="warning">⚠ DEVICE OVERHEATING — INPUT DISABLED</div>
  <div id="pixels"></div>

  <div id="blue" class="flash"></div>
  <div id="red" class="flash"></div>
  <div id="green" class="flash"></div>
</div>

<!-- AUDIO -->
<audio id="staticSound" loop preload="auto">
  <source src="crash-static.mp3" type="audio/mpeg">
</audio>

<audio id="beepSound" preload="auto">
  <source src="system-beep.mp3" type="audio/mpeg">
</audio>

<script>
/* ===== FULLSCREEN ===== */
document.documentElement.requestFullscreen?.().catch(()=>{});

/* ===== BACK BUTTON (BLOCK AT LEAST 2 TIMES) ===== */
let backCount = 0;
function lockBack() { history.pushState(null,"",location.href); }
lockBack();

window.addEventListener("popstate", () => {
  backCount++;
  if (backCount <= 2) lockBack();
});

/* ===== BLOCK TOUCH ===== */
document.addEventListener("touchmove", e => e.preventDefault(), { passive:false });

/* ===== APP SWITCH LOOP ===== */
document.addEventListener("visibilitychange", () => {
  if (document.hidden) location.reload();
});

/* ===== SOUND CONTROL ===== */
const staticSound = document.getElementById("staticSound");
const beepSound = document.getElementById("beepSound");
let soundStarted = false;

function startSound() {
  if (!soundStarted) {
    staticSound.volume = 0.4;
    staticSound.play().catch(()=>{});
    soundStarted = true;
  }
}

["touchstart","click","keydown"].forEach(e =>
  document.addEventListener(e, startSound, { once:true })
);

// Volume instability
setInterval(() => {
  if (soundStarted) staticSound.volume = 0.2 + Math.random()*0.4;
}, 900);

// Random system beep
setInterval(() => {
  if (soundStarted && Math.random() > 0.55) {
    beepSound.currentTime = 0;
    beepSound.play().catch(()=>{});
  }
}, 3000);

/* ===== HORIZONTAL TEARS ===== */
setInterval(() => {
  if (Math.random() > 0.6) {
    const s = document.createElement("div");
    s.className = "strip";
    s.style.top = Math.random()*innerHeight+"px";
    s.style.transform = `translateX(${Math.random()*60-30}px)`;
    document.body.appendChild(s);
    setTimeout(()=>s.remove(),120);
  }
},120);

/* ===== VERTICAL TEARS ===== */
setInterval(() => {
  if (Math.random() > 0.75) {
    const v = document.createElement("div");
    v.className = "vstrip";
    v.style.left = Math.random()*innerWidth+"px";
    v.style.transform = `translateY(${Math.random()*60-30}px)`;
    document.body.appendChild(v);
    setTimeout(()=>v.remove(),140);
  }
},200);

/* ===== PIXEL CORRUPTION ===== */
setInterval(() => {
  document.getElementById("pixels").style.opacity =
    Math.random()>0.6 ? 0.15 : 0;
},180);

/* ===== COLOR FLOODS ===== */
function flash(id,time=120){
  const f=document.getElementById(id);
  f.style.opacity=1;
  setTimeout(()=>f.style.opacity=0,time);
}

setInterval(()=>{
  const r=Math.random();
  if(r>0.92) flash("blue",160);
  else if(r>0.88) flash("red",120);
  else if(r>0.84) flash("green",120);
},700);

/* ===== HARD FREEZE ===== */
setInterval(()=>{
  if(Math.random()>0.9){
    document.body.style.filter="grayscale(100%) contrast(220%)";
    setTimeout(()=>document.body.style.filter="",320);
  }
},900);

/* ===== OVERHEAT WARNING ===== */
setInterval(()=>{
  document.getElementById("warning").style.opacity =
    Math.random()>0.6?1:0;
},1600);

/* ===== STRONG VIBRATION ===== */
if("vibrate" in navigator){
  setInterval(()=>{
    navigator.vibrate([200,60,200,60,300]);
  },2600);
}

/* ===== ADMIN UNLOCK ===== */
const p=new URLSearchParams(location.search);
if(p.get("admin")==="unlock"){
  localStorage.setItem("UNLOCK","1");
  alert("System recovered");
}

setInterval(()=>{
  if(localStorage.getItem("UNLOCK")==="1"){
    document.exitFullscreen?.();
    document.body.innerHTML =
      "<h2 style='color:#0f0;text-align:center;margin-top:40vh'>✔ SYSTEM RESTORED</h2>";
  }
},500);
</script>

</body>
</html>
